<form *ngIf="!isValid">
  <input
    type="password"
    placeholder="Check key"
    name="email"
    required
    [(ngModel)]="key"
  />
  <button type="submit" class="signupbtn" (click)="checkKey()">Check</button>
</form>

<div *ngIf="isValid">
  <div style="display: flex;    justify-content: space-between;">
    <button style="display: flex;" (click)="clhide()">
      <span *ngIf="!hide">Hide</span>
      <span *ngIf="hide">Show</span>
    </button>

    <!-- <button style="display: flex;" (click)="getCache()">getCache</button>
    <button style="display: flex;" (click)="setCache()">setCache</button> -->

    <button
      *ngIf="isAdmins()"
      style="display: flex;"
      (click)="fetch()"
      style="margin-right: 20px"
    >
      <span *ngIf="!loading">Admin</span>
      <span *ngIf="loading">........</span>
    </button>
  </div>

  <br />

  <div>
    <select
      style="margin-right: 10px"
      [(ngModel)]="cateActive"
      (change)="changeOptions($event)"
    >
      <option value="All">All</option>
      <option value="Messari">Messari</option>
      <option value="Manual">Manual</option>
    </select>
    <button
      style="margin-right: 10px"
      *ngIf="isShowCreate()"
      (click)="create()"
    >
      New
    </button>
    <button
      style="margin-right: 10px"
      *ngIf="isShowToCreate()"
      (click)="toCreate()"
    >
      Create
    </button>
    <button style="margin-right: 10px" *ngIf="isShowSave()" (click)="save()">
      Save
    </button>
    <button style="margin-right: 10px" *ngIf="isShowEdit()" (click)="edit()">
      Edit
    </button>
    <button style="margin-right: 10px" *ngIf="isShowBack()" (click)="back()">
      Back
    </button>
    <button
      style="margin-right: 10px"
      *ngIf="isShowUpload()"
      (click)="upload()"
    >
      Upload
    </button>
  </div>

  <br />

  <div class="block">
    <div class="item" *ngIf="!hide">
      <table>
        <tr>
          <th>Name</th>
        </tr>
        <tr *ngFor="let resit of res2">
          <td
            (click)="choose(resit)"
            [ngClass]="{
              active: resit.i == selected.i || resit.i == selected.id
            }"
          >
            <span style="margin-right: 20px">{{ resit.updateDateStr }}</span>
            <a [href]="resit.link">{{ resit.n }}</a>
            <span style="float: right">{{ resit.a }}</span>
          </td>
        </tr>
      </table>
    </div>

    <div class="item2" *ngIf="isShowDefault()"></div>

    <div class="item2" *ngIf="isShowPreview()">
      <markdown class="variable-binding" [data]="selected.markdown"></markdown>
    </div>

    <div class="item2" *ngIf="isShowCkeditor()">
      <div>
        <input
          placeholder="Name"
          [(ngModel)]="modelCreate.name"
          style="width: 40%; margin-bottom: 10px"
        />
      </div>

      <div>
        <input
          placeholder="Link"
          [(ngModel)]="modelCreate.link"
          style="width: 40%; margin-bottom: 10px"
        />
      </div>

      <div>
        <input
          type="date"
          id="datepost"
          name="datepost"
          [(ngModel)]="modelCreate.dateStr"
          style="width: 40%; margin-bottom: 10px"
        />
      </div>

      <ckeditor
        id="a9b3d911436184502833d05437b2c4c72"
        [editor]="Editor"
        [(ngModel)]="modelCreate.markdown"
        (change)="changeEditor()"
      ></ckeditor>
    </div>
  </div>

  <ng-template #customLoadingTemplate> </ng-template>

  <ngx-loading
    [show]="loading"
    [config]="{ backdropBorderRadius: '3px' }"
    [template]="customLoadingTemplate"
  ></ngx-loading>
</div>
